<?php
class lookupController {
	private $a = array('post' => '&#1662;&#1587;&#1578;&#8204;&#1607;&#1575;&#1740; &#1587;&#1575;&#1586;&#1605;&#1575;&#1606;&#1740;', 'employment_status' => '&#1608;&#1590;&#1593;&#1740;&#1578;&#8204;&#1607;&#1575;&#1740; &#1575;&#1587;&#1578;&#1582;&#1583;&#1575;&#1605;&#1740;', 'job_status' => '&#1608;&#1590;&#1593;&#1740;&#1578;&#8204;&#1607;&#1575;&#1740; &#1575;&#1588;&#1578;&#1594;&#1575;&#1604;', 'sarbazi' => '&#1593;&#1606;&#1575;&#1608;&#1740;&#1606; &#1587;&#1585;&#1576;&#1575;&#1586;&#1740;', 'geo' => '&#1605;&#1606;&#1575;&#1591;&#1602; &#1580;&#1594;&#1585;&#1575;&#1601;&#1740;&#1575;&#1740;&#1740;', 'degree' => '&#1583;&#1585;&#1580;&#1575;&#1578;', 'study_degree' => '&#1605;&#1602;&#1575;&#1591;&#1593; &#1578;&#1581;&#1589;&#1740;&#1604;&#1740;', 'study_field' => '&#1585;&#1588;&#1578;&#1607;&#8204;&#1607;&#1575;&#1740; &#1578;&#1581;&#1589;&#1740;&#1604;&#1740;', 'vacation' => '&#1575;&#1606;&#1608;&#1575;&#1593; &#1605;&#1585;&#1582;&#1589;&#1740;', 'hokm_type' => '&#1575;&#1606;&#1608;&#1575;&#1593; &#1581;&#1705;&#1605; &#1575;&#1587;&#1578;&#1582;&#1583;&#1575;&#1605;&#1740;', 't_cat' => '&#1585;&#1583;&#1607; &#1583;&#1608;&#1585;&#1607;&#8204;&#1607;&#1575;&#1740; &#1570;&#1605;&#1608;&#1586;&#1588;&#1740;', 'training' => '&#1583;&#1608;&#1585;&#1607;&#8204;&#1607;&#1575;&#1740; &#1570;&#1605;&#1608;&#1586;&#1588;&#1740;', 'notice_post' => '&#1587;&#1605;&#1578;&#8204;&#1607;&#1575;&#1740; &#1583;&#1575;&#1585;&#1575;&#1740; &#1575;&#1582;&#1591;&#1575;&#1585;');
	private $b = array('post' => '&#1575;&#1601;&#1586;&#1608;&#1583;&#1606; &#1662;&#1587;&#1578; &#1587;&#1575;&#1586;&#1605;&#1575;&#1606;&#1740;', 'employment_status' => '&#1575;&#1601;&#1586;&#1608;&#1583;&#1606; &#1608;&#1590;&#1593;&#1740;&#1578; &#1575;&#1587;&#1578;&#1582;&#1583;&#1575;&#1605;&#1740;', 'job_status' => '&#1575;&#1601;&#1586;&#1608;&#1583;&#1606; &#1608;&#1590;&#1593;&#1740;&#1578; &#1575;&#1588;&#1578;&#1594;&#1575;&#1604;', 'sarbazi' => '&#1575;&#1601;&#1586;&#1608;&#1583;&#1606; &#1593;&#1606;&#1608;&#1575;&#1606; &#1587;&#1585;&#1576;&#1575;&#1586;&#1740;', 'geo' => '&#1575;&#1601;&#1586;&#1608;&#1583;&#1606; &#1605;&#1606;&#1591;&#1602;&#1607; &#1580;&#1594;&#1585;&#1575;&#1601;&#1740;&#1575;&#1740;&#1740;', 'degree' => '&#1575;&#1601;&#1586;&#1608;&#1583;&#1606; &#1583;&#1585;&#1580;&#1607;', 'study_degree' => '&#1575;&#1601;&#1586;&#1608;&#1583;&#1606; &#1605;&#1602;&#1591;&#1593; &#1578;&#1581;&#1589;&#1740;&#1604;&#1740;', 'study_field' => '&#1575;&#1601;&#1586;&#1608;&#1583;&#1606; &#1585;&#1588;&#1578;&#1607; &#1578;&#1581;&#1589;&#1740;&#1604;&#1740;', 'vacation' => '&#1575;&#1601;&#1586;&#1608;&#1583;&#1606; &#1593;&#1606;&#1608;&#1575;&#1606; &#1605;&#1585;&#1582;&#1589;&#1740;', 'hokm_type' => '&#1575;&#1601;&#1586;&#1608;&#1583;&#1606; &#1606;&#1608;&#1593; &#1581;&#1705;&#1605;', 't_cat' => '&#1575;&#1601;&#1586;&#1608;&#1583;&#1606; &#1585;&#1583;&#1607; &#1583;&#1608;&#1585;&#1607;', 'training' => '&#1575;&#1601;&#1586;&#1608;&#1583;&#1606; &#1583;&#1608;&#1585;&#1607; &#1570;&#1605;&#1608;&#1586;&#1588;&#1740;', 'notice_post' => '&#1575;&#1601;&#1586;&#1608;&#1583;&#1606; &#1587;&#1605;&#1578; &#1583;&#1575;&#1585;&#1575;&#1740; &#1575;&#1582;&#1591;&#1575;&#1585;');
	private $c = array('post' => '&#1580;&#1586;&#1574;&#1740;&#1575;&#1578; &#1662;&#1587;&#1578; &#1587;&#1575;&#1586;&#1605;&#1575;&#1606;&#1740;', 'employment_status' => '&#1580;&#1586;&#1574;&#1740;&#1575;&#1578; &#1608;&#1590;&#1593;&#1740;&#1578; &#1575;&#1587;&#1578;&#1582;&#1583;&#1575;&#1605;&#1740;', 'job_status' => '&#1580;&#1586;&#1574;&#1740;&#1575;&#1578; &#1608;&#1590;&#1593;&#1740;&#1578; &#1575;&#1588;&#1578;&#1594;&#1575;&#1604;', 'sarbazi' => '&#1580;&#1586;&#1574;&#1740;&#1575;&#1578; &#1593;&#1606;&#1608;&#1575;&#1606; &#1587;&#1585;&#1576;&#1575;&#1586;&#1740;', 'geo' => '&#1580;&#1586;&#1574;&#1740;&#1575;&#1578; &#1605;&#1606;&#1591;&#1602;&#1607; &#1580;&#1594;&#1585;&#1575;&#1601;&#1740;&#1575;&#1740;&#1740;', 'degree' => '&#1580;&#1586;&#1574;&#1740;&#1575;&#1578; &#1583;&#1585;&#1580;&#1607;', 'study_degree' => '&#1580;&#1586;&#1574;&#1740;&#1575;&#1578; &#1605;&#1602;&#1591;&#1593; &#1578;&#1581;&#1589;&#1740;&#1604;&#1740;', 'study_field' => '&#1580;&#1586;&#1574;&#1740;&#1575;&#1578; &#1585;&#1588;&#1578;&#1607; &#1578;&#1581;&#1589;&#1740;&#1604;&#1740;', 'vacation' => '&#1580;&#1586;&#1574;&#1740;&#1575;&#1578; &#1593;&#1606;&#1608;&#1575;&#1606; &#1605;&#1585;&#1582;&#1589;&#1740;', 'hokm_type' => '&#1580;&#1586;&#1574;&#1740;&#1575;&#1578; &#1606;&#1608;&#1593; &#1581;&#1705;&#1605;', 't_cat' => '&#1580;&#1586;&#1574;&#1740;&#1575;&#1578; &#1585;&#1583;&#1607; &#1570;&#1605;&#1608;&#1586;&#1588;&#1740;', 'training' => '&#1580;&#1586;&#1662;&#1740;&#1575;&#1578; &#1583;&#1608;&#1585;&#1607; &#1570;&#1605;&#1608;&#1586;&#1588;&#1740;', 'notice_post' => '&#1580;&#1586;&#1574;&#1740;&#1575;&#1578; &#1587;&#1605;&#1578; &#1583;&#1575;&#1585;&#1575;&#1740; &#1575;&#1582;&#1591;&#1575;&#1585;');
	public function add() {$d = CUrl::segment(3);
		$e = new CForm($d);
		$e -> dontClose = TRUE;
		if (isset($_POST['submit']) && !empty($d)) {
			if ($e -> validate() === TRUE) {$f = new Lookup;
				$f -> add($d);
				CUrl::redirect('lookup/manage/' . $d);
			}
		}$c = new CView;
		$c -> type = $d;
		$c -> form = $e -> run();
		$c -> layout = FALSE;
		if (isset($this -> add[$d]))
			$c -> title = $this -> add[$d];
		$c -> run('lookup/add');
	}

	public function manage() {$d = CUrl::segment(3);
		$g = new CGrid($d);
		$g -> headers = array('name', 'description');
		$g -> table = 'tbl_lookup';
		$g -> counter = TRUE;
		$g -> condition = array('type' => $d);
		$g -> operations = array('edit' => FALSE, 'view' => FALSE, 'delete' => FALSE, "lookup/view/$d/" . '$value->id' => array('icon' => 'public/images/view.png', 'alt' => '&#1605;&#1588;&#1575;&#1607;&#1583;&#1607;', 'title' => '&#1605;&#1588;&#1575;&#1607;&#1583;&#1607; &#1608; &#1608;&#1740;&#1585;&#1575;&#1740;&#1588;'), "lookup/delete/$d/" . '$value->id' => array('icon' => 'public/images/delete.png', 'alt' => '&#1581;&#1584;&#1601;', 'title' => '&#1581;&#1584;&#1601;'));
		$c = new CView;
		$c -> body = $g -> run();
		$c -> type = $d;
		if (isset($this -> manage[$d]))
			$c -> title = $this -> manage[$d];
		if (isset($this -> add[$d]))
			$c -> add = $this -> add[$d];
		$c -> run('lookup/manage');
	}

	public function view() {$d = CUrl::segment(3);
		$h = CUrl::segment(4);
		$i = new CDatabase;
		$j = $i -> getByPk($h);
		if ($j === FALSE)
			CUrl::redirect(404);
		$e = new CForm($d);
		$e -> dontClose = TRUE;
		if (isset($_POST['submit'])) {
			if ($e -> validate() === TRUE) {$k = array('where' => array('id' => $h));
				$i -> update($k);
				CUrl::redirect('lookup/manage/' . $d);
			}
		}$c = new CView;
		$c -> model = $j;
		$c -> form = $e -> run();
		$c -> type = $d;
		$c -> layout = '';
		if (isset($this -> view[$d]))
			$c -> title = $this -> view[$d];
		$c -> run('lookup/add');
	}

	public function delete() {$d = CUrl::segment(3);
		$h = CUrl::segment(4);
		$l = 'DELETE FROM tbl_lookup WHERE id="' . $h . '"';
		$i = new CDatabase;
		$i -> execute($l);
		CUrl::redirect('lookup/manage/' . $d);
	}

}
